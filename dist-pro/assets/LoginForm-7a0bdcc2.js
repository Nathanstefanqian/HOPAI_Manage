import{d as J,r as d,u as K,a1 as H,b as Q,a,f as W,aR as X,A as Y,B as Z,a2 as $,o as N,q as k,w as t,i as e,a3 as ee,P as ae,j as E,t as L,l as te,a4 as le,a8 as re,a9 as ne,aa as oe,ab as se,a6 as ie,D as pe,E as de,T as me,ac as ue,n as ce,I as _e,ad as ge,ae as fe,__tla as he}from"./index-16a04392.js";import{_ as ye,__tla as we}from"./Verify-ce267050.js";import{_ as xe,__tla as be}from"./XButton-cfbd82e8.js";import{E as Fe,__tla as ve}from"./el-link-73beddd4.js";import{u as Ve,L as f,_ as Ne,a as ke,__tla as Ee}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-aa8ddcfa.js";import{u as h,__tla as Le}from"./useIcon-e03c82ad.js";import{u as Me,__tla as Pe}from"./useMessage-e6a37d8e.js";import{r as y,__tla as Re}from"./formRules-94b259ae.js";import{_ as Se}from"./_plugin-vue_export-helper-1b428a4d.js";let M,Ie=Promise.all([(()=>{try{return he}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Re}catch{}})()]).then(async()=>{M=Se(J({name:"LoginForm",__name:"LoginForm",setup(ze){const{t:p}=te();Me();const P=h({icon:"ep:house"}),R=h({icon:"ep:avatar"}),S=h({icon:"ep:lock"}),w=d(),{validForm:I}=ke(w),{setLoginState:x,getLoginState:z}=Ve(),{currentRoute:T,push:U}=K(),j=H(),m=d(""),u=d(!1),b=d(),C=d("blockPuzzle"),O=Q(()=>a(z)===f.LOGIN),q={tenantName:[y],username:[y],password:[y]},l=W({isShowPassword:!1,captchaEnable:"true",tenantEnable:"true",loginForm:{tenantName:"\u548C\u62CD\u6E90\u7801",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),F=async()=>{l.captchaEnable==="false"?await V({}):b.value.show()},v=d(),V=async n=>{u.value=!0;try{if(await(async()=>{if(l.tenantEnable==="true"){const i=await ge(l.loginForm.tenantName);fe(i)}})(),!await I())return;l.loginForm.captchaVerification=n.captchaVerification;const r=await re(l.loginForm);if(!r)return;v.value=ne.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),l.loginForm.rememberMe?oe(l.loginForm):se(),ie(r),m.value||(m.value="/"),m.value.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):U({path:m.value||j.addRouters[0].path})}finally{u.value=!1,v.value.close()}};return X(()=>T.value,n=>{var r;m.value=(r=n==null?void 0:n.query)==null?void 0:r.redirect},{immediate:!0}),Y(()=>{(()=>{const n=le();n&&(l.loginForm={...l.loginForm,username:n.username?n.username:l.loginForm.username,password:n.password?n.password:l.loginForm.password,rememberMe:!!n.rememberMe,tenantName:n.tenantName?n.tenantName:l.loginForm.tenantName})})()}),(n,r)=>{const i=pe,o=de,c=me,B=ue,D=Fe,_=ce,g=xe,G=ye,A=_e;return Z((N(),k(A,{ref_key:"formLogin",ref:w,model:a(l).loginForm,rules:q,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:t(()=>[e(_,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:t(()=>[e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(Ne,{style:{width:"100%"}})]),_:1})]),_:1}),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(l).tenantEnable==="true"?(N(),k(i,{key:0,prop:"tenantName"},{default:t(()=>[e(c,{modelValue:a(l).loginForm.tenantName,"onUpdate:modelValue":r[0]||(r[0]=s=>a(l).loginForm.tenantName=s),placeholder:a(p)("login.tenantNamePlaceholder"),"prefix-icon":a(P),link:"",type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):ee("",!0)]),_:1}),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(i,{prop:"username"},{default:t(()=>[e(c,{modelValue:a(l).loginForm.username,"onUpdate:modelValue":r[1]||(r[1]=s=>a(l).loginForm.username=s),placeholder:a(p)("login.usernamePlaceholder"),"prefix-icon":a(R)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(i,{prop:"password"},{default:t(()=>[e(c,{modelValue:a(l).loginForm.password,"onUpdate:modelValue":r[2]||(r[2]=s=>a(l).loginForm.password=s),placeholder:a(p)("login.passwordPlaceholder"),"prefix-icon":a(S),"show-password":"",type:"password",onKeyup:r[3]||(r[3]=ae(s=>F(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(_,{justify:"space-between",style:{width:"100%"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[e(B,{modelValue:a(l).loginForm.rememberMe,"onUpdate:modelValue":r[4]||(r[4]=s=>a(l).loginForm.rememberMe=s)},{default:t(()=>[E(L(a(p)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),e(o,{offset:6,span:12},{default:t(()=>[e(D,{style:{float:"right"},type:"primary"},{default:t(()=>[E(L(a(p)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(g,{loading:a(u),title:a(p)("login.login"),class:"w-[100%]",type:"success",onClick:r[5]||(r[5]=s=>F())},null,8,["loading","title"])]),_:1})]),_:1}),e(G,{ref_key:"verify",ref:b,captchaType:a(C),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:V},null,8,["captchaType"]),e(o,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(_,{gutter:5,justify:"space-between",style:{width:"100%"}},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(g,{title:a(p)("login.btnMobile"),class:"w-[100%]",onClick:r[6]||(r[6]=s=>a(x)(a(f).MOBILE))},null,8,["title"])]),_:1}),e(o,{span:8}),e(o,{span:8},{default:t(()=>[e(g,{title:a(p)("login.btnRegister"),class:"w-[100%]",onClick:r[7]||(r[7]=s=>a(x)(a(f).REGISTER))},null,8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[$,a(O)]])}}}),[["__scopeId","data-v-78320a65"]])});export{Ie as __tla,M as default};
