import{_ as re,__tla as oe}from"./Descriptions-b3e3e861.js";import{d as se,p as j,r as y,f as A,aR as pe,A as de,o as d,c as b,q as m,w as t,a as e,a3 as V,i as l,F as h,I as ue,k as I,j as c,t as g,aw as ie,dD as ne,T as ce,D as _e,E as me,bZ as fe,C as ye,ah as be,ag as he,H as ke,n as Ve,M as ge,__tla as ve}from"./index-866c10ab.js";import{E as Ue,__tla as we}from"./el-image-f7390113.js";import{__tla as Ie}from"./el-image-viewer-0c01b9df.js";import{_ as Te,__tla as Pe}from"./UploadImgs-fdfe97e0.js";import{_ as Ce,__tla as Le}from"./UploadImg-24b50c1e.js";import{h as De,d as xe,t as Re}from"./tree-ebab458e.js";import{c as Be,__tla as Fe}from"./index-f94c78b7.js";import{a as Se,D as Ee,__tla as Ne}from"./dict-5aa95b7f.js";import{g as Oe,__tla as je}from"./index-eab2f032.js";import{_ as Ae,__tla as He}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-04d5da8a.js";import{_ as Ze,__tla as qe}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-fc67a422.js";import{b as ze,__tla as Ge}from"./spu.data-7172895b.js";import{g as Je,__tla as Ke}from"./category-20adf7fb.js";import{g as Me,__tla as $e}from"./brand-dfb523c3.js";import{g as Qe,__tla as We}from"./index-ea9786aa.js";import{u as Xe,__tla as Ye}from"./useCrudSchemas-65a51acb.js";import{u as ea,__tla as aa}from"./useMessage-68df17f5.js";import{r as n,__tla as la}from"./formRules-e8738b12.js";import{_ as T,__tla as ta}from"./SkuList.vue_vue_type_script_setup_true_lang-c286519f.js";let H,ra=Promise.all([(()=>{try{return oe}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return je}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return ta}catch{}})()]).then(async()=>{H=se({name:"ProductSpuBasicInfoForm",__name:"BasicInfoForm",props:{propFormData:{type:Object,default:()=>{}},activeName:j.string.def(""),isDetail:j.bool.def(!1)},emits:["update:activeName"],setup(v,{expose:Z,emit:q}){const B=[{name:"stock",rule:s=>s>=1,message:"\u5546\u54C1\u5E93\u5B58\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 1 \uFF01\uFF01\uFF01"},{name:"price",rule:s=>s>=.01,message:"\u5546\u54C1\u9500\u552E\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"marketPrice",rule:s=>s>=.01,message:"\u5546\u54C1\u5E02\u573A\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"costPrice",rule:s=>s>=.01,message:"\u5546\u54C1\u6210\u672C\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"}],{allSchemas:z}=Xe(ze),F=s=>{const o=[];ie(s)?s.forEach(f=>{o.push(f.url)}):o.push(s),Be({urlList:o})},G=ea(),S=v,E=y(),P=y(),_=y([]),U=y(),J=s=>{U.value.generateTableData(s)},r=A({name:"",categoryId:null,keyword:"",unit:null,picUrl:"",sliderPicUrls:[],introduction:"",deliveryTemplateId:null,brandId:null,specType:!1,subCommissionType:!1,skus:[]}),K=A({name:[n],categoryId:[n],keyword:[n],unit:[n],introduction:[n],picUrl:[n],sliderPicUrls:[n],deliveryTemplateId:[n],brandId:[n],specType:[n],subCommissionType:[n]});pe(()=>S.propFormData,s=>{var o;s&&(ne(r,s),r.sliderPicUrls=(o=s.sliderPicUrls)==null?void 0:o.map(f=>({url:f})),_.value=Oe(s))},{immediate:!0});const M=q;Z({validate:async()=>{if(U.value.validateSku(),P)return await e(P).validate(s=>{if(!s)throw G.warning("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01"),M("update:activeName","basicInfo"),new Error("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01");Object.assign(S.propFormData,r)})}});const $=()=>{for(const s of r.skus)s.firstBrokeragePrice=0,s.secondBrokeragePrice=0},Q=()=>{_.value=[],r.skus=[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}]},C=y([]),L=y([]),D=y([]);return de(async()=>{const s=await Je({});C.value=De(s,"id","parentId"),L.value=await Me(),D.value=await Qe()}),(s,o)=>{const f=ce,p=_e,u=me,W=fe,x=ge,R=ye,X=Ce,Y=Te,w=be,N=he,ee=ke,ae=Ve,le=ue,O=Ue,te=re;return d(),b(h,null,[v.isDetail?V("",!0):(d(),m(le,{key:0,ref_key:"productSpuBasicInfoRef",ref:P,model:e(r),rules:e(K),"label-width":"120px"},{default:t(()=>[l(ae,null,{default:t(()=>[l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u540D\u79F0",prop:"name"},{default:t(()=>[l(f,{modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[l(W,{modelValue:e(r).categoryId,"onUpdate:modelValue":o[1]||(o[1]=a=>e(r).categoryId=a),options:e(C),props:e(xe),class:"w-1/1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B",filterable:""},null,8,["modelValue","options","props"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5173\u952E\u5B57",prop:"keyword"},{default:t(()=>[l(f,{modelValue:e(r).keyword,"onUpdate:modelValue":o[2]||(o[2]=a=>e(r).keyword=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5173\u952E\u5B57"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5355\u4F4D",prop:"unit"},{default:t(()=>[l(R,{modelValue:e(r).unit,"onUpdate:modelValue":o[3]||(o[3]=a=>e(r).unit=a),class:"w-1/1",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:t(()=>[(d(!0),b(h,null,I(e(Se)(e(Ee).PRODUCT_UNIT),a=>(d(),m(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u7B80\u4ECB",prop:"introduction"},{default:t(()=>[l(f,{modelValue:e(r).introduction,"onUpdate:modelValue":o[4]||(o[4]=a=>e(r).introduction=a),rows:3,placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u4ECB",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5C01\u9762\u56FE",prop:"picUrl"},{default:t(()=>[l(X,{modelValue:e(r).picUrl,"onUpdate:modelValue":o[5]||(o[5]=a=>e(r).picUrl=a),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[l(p,{label:"\u5546\u54C1\u8F6E\u64AD\u56FE",prop:"sliderPicUrls"},{default:t(()=>[l(Y,{modelValue:e(r).sliderPicUrls,"onUpdate:modelValue":o[6]||(o[6]=a=>e(r).sliderPicUrls=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u8FD0\u8D39\u6A21\u677F",prop:"deliveryTemplateId"},{default:t(()=>[l(R,{modelValue:e(r).deliveryTemplateId,"onUpdate:modelValue":o[7]||(o[7]=a=>e(r).deliveryTemplateId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,I(e(D),a=>(d(),m(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u54C1\u724C",prop:"brandId"},{default:t(()=>[l(R,{modelValue:e(r).brandId,"onUpdate:modelValue":o[8]||(o[8]=a=>e(r).brandId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,I(e(L),a=>(d(),m(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u89C4\u683C",props:"specType"},{default:t(()=>[l(N,{modelValue:e(r).specType,"onUpdate:modelValue":o[9]||(o[9]=a=>e(r).specType=a),onChange:Q},{default:t(()=>[l(w,{label:!1,class:"radio"},{default:t(()=>[c("\u5355\u89C4\u683C")]),_:1}),l(w,{label:!0},{default:t(()=>[c("\u591A\u89C4\u683C")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5206\u9500\u7C7B\u578B",props:"subCommissionType"},{default:t(()=>[l(N,{modelValue:e(r).subCommissionType,"onUpdate:modelValue":o[10]||(o[10]=a=>e(r).subCommissionType=a),onChange:$},{default:t(()=>[l(w,{label:!1},{default:t(()=>[c("\u9ED8\u8BA4\u8BBE\u7F6E")]),_:1}),l(w,{label:!0,class:"radio"},{default:t(()=>[c("\u5355\u72EC\u8BBE\u7F6E")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[e(r).specType?V("",!0):(d(),m(p,{key:0},{default:t(()=>[l(e(T),{ref_key:"skuListRef",ref:U,"prop-form-data":e(r),propertyList:e(_),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})),e(r).specType?(d(),m(p,{key:1,label:"\u5546\u54C1\u5C5E\u6027"},{default:t(()=>[l(ee,{class:"mb-10px mr-15px",onClick:e(E).open},{default:t(()=>[c("\u6DFB\u52A0\u5C5E\u6027")]),_:1},8,["onClick"]),l(Ae,{propertyList:e(_),onSuccess:J},null,8,["propertyList"])]),_:1})):V("",!0),e(r).specType&&e(_).length>0?(d(),b(h,{key:2},[l(p,{label:"\u6279\u91CF\u8BBE\u7F6E"},{default:t(()=>[l(e(T),{"is-batch":!0,"prop-form-data":e(r),propertyList:e(_)},null,8,["prop-form-data","propertyList"])]),_:1}),l(p,{label:"\u5C5E\u6027\u5217\u8868"},{default:t(()=>[l(e(T),{ref_key:"skuListRef",ref:U,"prop-form-data":e(r),propertyList:e(_),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})],64)):V("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),v.isDetail?(d(),m(te,{key:1,data:e(r),schema:e(z).detailSchema},{categoryId:t(({row:a})=>{return[c(g((i=a.categoryId,Re(C.value,i))),1)];var i}),brandId:t(({row:a})=>{var i;return[c(g((i=e(L).find(k=>k.id===a.brandId))==null?void 0:i.name),1)]}),deliveryTemplateId:t(({row:a})=>{var i;return[c(g((i=e(D).find(k=>k.id===a.deliveryTemplateId))==null?void 0:i.name),1)]}),specType:t(({row:a})=>[c(g(a.specType?"\u591A\u89C4\u683C":"\u5355\u89C4\u683C"),1)]),subCommissionType:t(({row:a})=>[c(g(a.subCommissionType?"\u5355\u72EC\u8BBE\u7F6E":"\u9ED8\u8BA4\u8BBE\u7F6E"),1)]),picUrl:t(({row:a})=>[l(O,{src:a.picUrl,class:"h-60px w-60px",onClick:i=>F(a.picUrl)},null,8,["src","onClick"])]),sliderPicUrls:t(({row:a})=>[(d(!0),b(h,null,I(a.sliderPicUrls,(i,k)=>(d(),m(O,{key:k,src:i.url,class:"mr-10px h-60px w-60px",onClick:oa=>F(a.sliderPicUrls)},null,8,["src","onClick"]))),128))]),skus:t(()=>[l(e(T),{ref:"skuDetailListRef","is-detail":v.isDetail,"prop-form-data":e(r),propertyList:e(_)},null,8,["is-detail","prop-form-data","propertyList"])]),_:1},8,["data","schema"])):V("",!0),l(Ze,{ref_key:"attributesAddFormRef",ref:E,propertyList:e(_)},null,8,["propertyList"])],64)}}})});export{H as _,ra as __tla};
