import{ao as y,d as G,r as u,f as J,O as L,o as A,c as Q,i as t,w as l,a as r,x as g,B as X,q as Y,j as m,a3 as $,F as aa,D as ea,I as ta,_ as ra,H as la,E as sa,n as oa,y as _a,z as ua,cd as na,__tla as ca}from"./index-9a3dc6a8.js";import{_ as pa,__tla as ia}from"./index-977c4d69.js";import{_ as ma,__tla as da}from"./ReplyForm.vue_vue_type_script_setup_true_lang-4d0be99a.js";import{R as k,__tla as ya}from"./TabNews-4c41c5b4.js";import{__tla as fa}from"./main-68405b55.js";import{__tla as ha}from"./useUpload-39d248a6.js";import{u as va,__tla as Ma}from"./useMessage-78b6afd0.js";import{__tla as ga}from"./TabImage-e9797588.js";import{__tla as Ia}from"./main-9b3a4b22.js";import{__tla as Ua}from"./TabVoice-968c836c.js";import{__tla as wa}from"./main.vue_vue_type_script_setup_true_lang-da7b4644.js";import{__tla as ba}from"./TabVideo-ae03e1ae.js";import{__tla as Ta}from"./el-image-5e367cc1.js";import{__tla as xa}from"./el-image-viewer-9fcd8ab9.js";import{__tla as Va}from"./main-b95b6a24.js";import{__tla as qa}from"./main-592dab60.js";import{_ as Ca,__tla as Aa}from"./main.vue_vue_type_script_setup_true_lang-c73a83ae.js";import{_ as D,__tla as ka}from"./ContentWrap.vue_vue_type_script_setup_true_lang-29b6dc10.js";import{_ as Da,__tla as Fa}from"./ReplyTable.vue_vue_type_script_setup_true_lang-f6a30cf6.js";import{M as d}from"./types-5e186e8c.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Ka}from"./dict-8e2bc13b.js";import{__tla as Oa}from"./index.vue_vue_type_script_setup_true_lang-30f8ef1e.js";import{__tla as Ha}from"./index-b4b95b06.js";import{__tla as Na}from"./index-177e9bd7.js";import{__tla as Ra}from"./index-9f9d9d6a.js";import{__tla as za}from"./formatTime-62b946ce.js";import{__tla as Pa}from"./TabText.vue_vue_type_script_setup_true_lang-07ca320e.js";import{__tla as ja}from"./TabMusic.vue_vue_type_script_setup_true_lang-965a20e3.js";import{__tla as Ba}from"./index-2590bb84.js";import{__tla as Ea}from"./el-card-a6a1b26c.js";import{__tla as Sa}from"./DictTag.vue_vue_type_script_lang-8b411a6b.js";import"./color-a8b4eb58.js";import{__tla as Wa}from"./main-8ffca82d.js";import{__tla as Za}from"./el-link-c094d819.js";let F,Ga=Promise.all([(()=>{try{return ca}catch{}})(),(()=>{try{return ia}catch{}})(),(()=>{try{return da}catch{}})(),(()=>{try{return ya}catch{}})(),(()=>{try{return fa}catch{}})(),(()=>{try{return ha}catch{}})(),(()=>{try{return Ma}catch{}})(),(()=>{try{return ga}catch{}})(),(()=>{try{return Ia}catch{}})(),(()=>{try{return Ua}catch{}})(),(()=>{try{return wa}catch{}})(),(()=>{try{return ba}catch{}})(),(()=>{try{return Ta}catch{}})(),(()=>{try{return xa}catch{}})(),(()=>{try{return Va}catch{}})(),(()=>{try{return qa}catch{}})(),(()=>{try{return Aa}catch{}})(),(()=>{try{return ka}catch{}})(),(()=>{try{return Fa}catch{}})(),(()=>{try{return Ka}catch{}})(),(()=>{try{return Oa}catch{}})(),(()=>{try{return Ha}catch{}})(),(()=>{try{return Na}catch{}})(),(()=>{try{return Ra}catch{}})(),(()=>{try{return za}catch{}})(),(()=>{try{return Pa}catch{}})(),(()=>{try{return ja}catch{}})(),(()=>{try{return Ba}catch{}})(),(()=>{try{return Ea}catch{}})(),(()=>{try{return Sa}catch{}})(),(()=>{try{return Wa}catch{}})(),(()=>{try{return Za}catch{}})()]).then(async()=>{F=G({name:"MpAutoReply",__name:"index",setup(Ja){const f=va(),C=u(-1),_=u(d.Keyword),I=u(!0),K=u(0),U=u([]),w=u(null),n=J({pageNo:1,pageSize:10,accountId:C}),b=u(!1),c=u(!1),o=u({}),s=u({type:k.Text,accountId:-1}),O=a=>{C.value=a,s.value.accountId=a,n.pageNo=1,h()},h=async()=>{I.value=!0;try{const e=await(a={...n,type:_.value},y.get({url:"/mp/auto-reply/page",params:a}));U.value=e.list,K.value=e.total}finally{I.value=!1}var a},H=a=>{_.value=a,n.pageNo=1,h()},N=()=>{T(),s.value={type:k.Text,accountId:n.accountId},b.value=!0,c.value=!0},R=async a=>{T();const e=await(i=>y.get({url:"/mp/auto-reply/get?id="+i}))(a);o.value={...e},delete o.value.responseMessageType,delete o.value.responseContent,delete o.value.responseMediaId,delete o.value.responseMediaUrl,delete o.value.responseDescription,delete o.value.responseArticles,s.value={type:e.responseMessageType,accountId:n.accountId,content:e.responseContent,mediaId:e.responseMediaId,url:e.responseMediaUrl,title:e.responseTitle,description:e.responseDescription,thumbMediaId:e.responseThumbMediaId,thumbMediaUrl:e.responseThumbMediaUrl,articles:e.responseArticles,musicUrl:e.responseMusicUrl,hqMusicUrl:e.responseHqMusicUrl},b.value=!1,c.value=!0},z=async a=>{await f.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\u6B64\u6570\u636E?"),await(e=>y.delete({url:"/mp/auto-reply/delete?id="+e}))(a),await h(),f.success("\u5220\u9664\u6210\u529F")},P=async()=>{var i;await((i=w.value)==null?void 0:i.validate());const a={...o.value};var e;a.responseMessageType=s.value.type,a.responseContent=s.value.content,a.responseMediaId=s.value.mediaId,a.responseMediaUrl=s.value.url,a.responseTitle=s.value.title,a.responseDescription=s.value.description,a.responseThumbMediaId=s.value.thumbMediaId,a.responseThumbMediaUrl=s.value.thumbMediaUrl,a.responseArticles=s.value.articles,a.responseMusicUrl=s.value.musicUrl,a.responseHqMusicUrl=s.value.hqMusicUrl,o.value.id!==void 0?(await(e=a,y.put({url:"/mp/auto-reply/update",data:e})),f.success("\u4FEE\u6539\u6210\u529F")):(await(x=>y.post({url:"/mp/auto-reply/create",data:x}))(a),f.success("\u65B0\u589E\u6210\u529F")),c.value=!1,await h()},T=()=>{var a;o.value={id:void 0,accountId:n.accountId,type:_.value,requestKeyword:void 0,requestMatch:_.value===d.Keyword?1:void 0,requestMessageType:void 0},(a=w.value)==null||a.resetFields()},j=()=>{c.value=!1,T()};return(a,e)=>{const i=pa,x=ea,B=ta,v=ra,V=la,E=sa,M=oa,q=_a,S=ua,W=na,Z=L("hasPermi");return A(),Q(aa,null,[t(i,{title:"\u81EA\u52A8\u56DE\u590D",url:"https://doc.iocoder.cn/mp/auto-reply/"}),t(r(D),null,{default:l(()=>[t(B,{class:"-mb-15px",model:r(n),inline:!0,"label-width":"68px"},{default:l(()=>[t(x,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:l(()=>[t(r(Ca),{onChange:O})]),_:1})]),_:1},8,["model"])]),_:1}),t(r(D),null,{default:l(()=>[t(S,{modelValue:r(_),"onUpdate:modelValue":e[0]||(e[0]=p=>g(_)?_.value=p:null),onTabChange:H},{default:l(()=>[t(M,{gutter:10,class:"mb8"},{default:l(()=>[t(E,{span:1.5},{default:l(()=>[r(_)!==r(d).Follow||r(U).length<=0?X((A(),Y(V,{key:0,type:"primary",plain:"",onClick:N},{default:l(()=>[t(v,{icon:"ep:plus"}),m("\u65B0\u589E ")]),_:1})),[[Z,["mp:auto-reply:create"]]]):$("",!0)]),_:1})]),_:1}),t(q,{name:r(d).Follow},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(v,{icon:"ep:star",class:"mr-2px"}),m(" \u5173\u6CE8\u65F6\u56DE\u590D")]),_:1})]),_:1},8,["name"]),t(q,{name:r(d).Message},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(v,{icon:"ep:chat-line-round",class:"mr-2px"}),m(" \u6D88\u606F\u56DE\u590D")]),_:1})]),_:1},8,["name"]),t(q,{name:r(d).Keyword},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(v,{icon:"fa:newspaper-o",class:"mr-2px"}),m(" \u5173\u952E\u8BCD\u56DE\u590D")]),_:1})]),_:1},8,["name"])]),_:1},8,["modelValue"]),t(Da,{loading:r(I),list:r(U),"msg-type":r(_),onOnUpdate:R,onOnDelete:z},null,8,["loading","list","msg-type"]),t(W,{title:r(b)?"\u65B0\u589E\u81EA\u52A8\u56DE\u590D":"\u4FEE\u6539\u81EA\u52A8\u56DE\u590D",modelValue:r(c),"onUpdate:modelValue":e[3]||(e[3]=p=>g(c)?c.value=p:null),width:"800px","destroy-on-close":""},{footer:l(()=>[t(V,{onClick:j},{default:l(()=>[m("\u53D6 \u6D88")]),_:1}),t(V,{type:"primary",onClick:P},{default:l(()=>[m("\u786E \u5B9A")]),_:1})]),default:l(()=>[t(ma,{modelValue:r(o),"onUpdate:modelValue":e[1]||(e[1]=p=>g(o)?o.value=p:null),reply:r(s),"onUpdate:reply":e[2]||(e[2]=p=>g(s)?s.value=p:null),"msg-type":r(_),ref_key:"formRef",ref:w},null,8,["modelValue","reply","msg-type"])]),_:1},8,["title","modelValue"])]),_:1})],64)}}})});export{Ga as __tla,F as default};
