import{d as D,p as i,cq as F,r as u,co as P,cp as G,aR as H,o as U,c as J,i as p,w as $,a as c,x as K,V as N,g as t,aI as q,q as O,a3 as W,c8 as m,bn as X,aQ as Y,_ as Z,$ as aa,a0 as ea,__tla as la}from"./index-866c10ab.js";import{E as ia,__tla as sa}from"./el-image-viewer-0c01b9df.js";import{u as ta,__tla as ra}from"./useMessage-68df17f5.js";let I,da=Promise.all([(()=>{try{return la}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{let f,_,v,y,h,b,k,x,V;f=a=>(aa("data-v-3658f35e"),a=a(),ea(),a),_={class:"upload-box"},v={class:"upload-empty"},y=["src"],h=["onClick"],b=f(()=>t("span",null,"\u67E5\u770B",-1)),k=["onClick"],x=f(()=>t("span",null,"\u5220\u9664",-1)),V={class:"el-upload__tip"},I=D({name:"UploadImgs",__name:"UploadImgs",props:{modelValue:{type:Array,required:!0},updateUrl:i.string.def("https://mp.api.hopai.cn/admin-api/infra/file/upload"),drag:i.bool.def(!0),disabled:i.bool.def(!1),limit:i.number.def(5),fileSize:i.number.def(5),fileType:i.array.def(["image/jpeg","image/png","image/gif"]),height:i.string.def("150px"),width:i.string.def("150px"),borderradius:i.string.def("8px")},emits:["update:modelValue"],setup(a,{emit:S}){F(e=>({c41eccd2:a.borderradius,"2c92160d":a.width,"4be1b1c0":a.height}));const T=ta(),n=a,j=u({Authorization:"Bearer "+P(),"tenant-id":G()}),s=u([]);H(()=>n.modelValue,e=>{e&&(s.value=e)},{deep:!0,immediate:!0});const A=e=>{const l=e.size/1024/1024<n.fileSize,r=n.fileType;return r.includes(e.type)||m({title:"\u6E29\u99A8\u63D0\u793A",message:"\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01",type:"warning"}),l||m({title:"\u6E29\u99A8\u63D0\u793A",message:`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${n.fileSize}M\uFF01`,type:"warning"}),r.includes(e.type)&&l},w=S,M=(e,l)=>{e&&(l.url=e.data,w("update:modelValue",s.value),T.success("\u4E0A\u4F20\u6210\u529F"))},B=()=>{m({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01",type:"error"})},E=()=>{m({title:"\u6E29\u99A8\u63D0\u793A",message:`\u5F53\u524D\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 ${n.limit} \u5F20\u56FE\u7247\uFF0C\u8BF7\u79FB\u9664\u540E\u4E0A\u4F20\uFF01`,type:"warning"})},z=u(""),g=u(!1);return(e,l)=>{const r=Z,L=X,Q=ia;return U(),J("div",_,[p(L,{"file-list":c(s),"onUpdate:fileList":l[1]||(l[1]=d=>K(s)?s.value=d:null),accept:a.fileType.join(","),action:a.updateUrl,"before-upload":A,class:N(["upload",a.drag?"no-border":""]),drag:a.drag,headers:c(j),limit:a.limit,multiple:!0,"on-error":B,"on-exceed":E,"on-success":M,"list-type":"picture-card"},{file:$(({file:d})=>[t("img",{src:d.url,class:"upload-image"},null,8,y),t("div",{class:"upload-handle",onClick:l[0]||(l[0]=Y(()=>{},["stop"]))},[t("div",{class:"handle-icon",onClick:R=>{return o=d,z.value=o.url,void(g.value=!0);var o}},[p(r,{icon:"ep:zoom-in"}),b],8,h),t("div",{class:"handle-icon",onClick:R=>{return o=d,s.value=s.value.filter(C=>C.url!==o.url||C.name!==o.name),void w("update:modelValue",s.value);var o}},[p(r,{icon:"ep:delete"}),x],8,k)])]),default:$(()=>[t("div",v,[q(e.$slots,"empty",{},()=>[p(r,{icon:"ep:plus"})],!0)])]),_:3},8,["file-list","accept","action","class","drag","headers","limit"]),t("div",V,[q(e.$slots,"tip",{},void 0,!0)]),c(g)?(U(),O(Q,{key:0,"url-list":[c(z)],onClose:l[2]||(l[2]=d=>g.value=!1)},null,8,["url-list"])):W("",!0)])}}})});export{I as _,da as __tla};
