import{cu as ve,aW as me,aZ as pe,b3 as be,cc as ge,ba as X,d as M,cv as V,cw as ke,cx as _e,bE as we,a$ as xe,cy as ye,r as h,cz as Ie,cl as ze,b as _,aQ as Q,al as he,A as Ce,o as C,q as Z,i,w as b,g as m,V as f,a,au as j,aP as Oe,a3 as O,b0 as w,cA as Ne,c as B,F as q,cB as Te,cC as Ae,cD as Ee,cE as Le,aO as Re,cF as Ye,cG as Xe,k as Be,B as Se,a2 as Fe,aH as $e,Y as De,cH as Pe,b1 as We,cI as E,bB as z,cJ as Ge,b2 as He,__tla as Me}from"./index-8d332a1f.js";let J,N,Ve=Promise.all([(()=>{try{return Me}catch{}})()]).then(async()=>{N=function(g,T,v){var l=!0,p=!0;if(typeof g!="function")throw new TypeError("Expected a function");return ve(v)&&(l="leading"in v?!!v.leading:l,p="trailing"in v?!!v.trailing:p),me(g,T,{leading:l,maxWait:T,trailing:p})};const U=pe({urlList:{type:be(Array),default:()=>ge([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),K={close:()=>!0,switch:g=>X(g),rotate:g=>X(g)},ee=["src"],ae=M({name:"ElImageViewer"});J=He(We(M({...ae,props:U,emits:K,setup(g,{expose:T,emit:v}){const l=g,p={CONTAIN:{name:"contain",icon:V(ke)},ORIGINAL:{name:"original",icon:V(_e)}},{t:se}=we(),n=xe("image-viewer"),{nextZIndex:le}=ye(),L=h(),S=h([]),F=Ie(),y=h(!0),k=h(l.initialIndex),A=ze(p.CONTAIN),t=h({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ne=_(()=>{const{urlList:e}=l;return e.length<=1}),$=_(()=>k.value===0),D=_(()=>k.value===l.urlList.length-1),te=_(()=>l.urlList[k.value]),oe=_(()=>[n.e("btn"),n.e("prev"),n.is("disabled",!l.infinite&&$.value)]),ie=_(()=>[n.e("btn"),n.e("next"),n.is("disabled",!l.infinite&&D.value)]),ce=_(()=>{const{scale:e,deg:s,offsetX:o,offsetY:u,enableTransition:c}=t.value;let r=o/e,d=u/e;switch(s%360){case 90:case-270:[r,d]=[d,-r];break;case 180:case-180:[r,d]=[-r,-d];break;case 270:case-90:[r,d]=[-d,r]}const I={transform:`scale(${e}) rotate(${s}deg) translate(${r}px, ${d}px)`,transition:c?"transform .3s":""};return A.value.name===p.CONTAIN.name&&(I.maxWidth=I.maxHeight="100%"),I}),ue=_(()=>X(l.zIndex)?l.zIndex:le());function R(){F.stop(),v("close")}function re(){y.value=!1}function de(e){y.value=!1,e.target.alt=se("el.image.error")}function fe(e){if(y.value||e.button!==0||!L.value)return;t.value.enableTransition=!1;const{offsetX:s,offsetY:o}=t.value,u=e.pageX,c=e.pageY,r=N(I=>{t.value={...t.value,offsetX:s+I.pageX-u,offsetY:o+I.pageY-c}}),d=E(document,"mousemove",r);E(document,"mouseup",()=>{d()}),e.preventDefault()}function P(){t.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function W(){if(y.value)return;const e=Ge(p),s=Object.values(p),o=A.value.name,u=(s.findIndex(c=>c.name===o)+1)%e.length;A.value=p[e[u]],P()}function Y(e){const s=l.urlList.length;k.value=(e+s)%s}function G(){$.value&&!l.infinite||Y(k.value-1)}function H(){D.value&&!l.infinite||Y(k.value+1)}function x(e,s={}){if(y.value)return;const{minScale:o,maxScale:u}=l,{zoomRate:c,rotateDeg:r,enableTransition:d}={zoomRate:l.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(e){case"zoomOut":t.value.scale>o&&(t.value.scale=Number.parseFloat((t.value.scale/c).toFixed(3)));break;case"zoomIn":t.value.scale<u&&(t.value.scale=Number.parseFloat((t.value.scale*c).toFixed(3)));break;case"clockwise":t.value.deg+=r,v("rotate",t.value.deg);break;case"anticlockwise":t.value.deg-=r,v("rotate",t.value.deg)}t.value.enableTransition=d}return Q(te,()=>{he(()=>{const e=S.value[0];e!=null&&e.complete||(y.value=!0)})}),Q(k,e=>{P(),v("switch",e)}),Ce(()=>{var e,s;(function(){const o=N(c=>{switch(c.code){case z.esc:l.closeOnPressEscape&&R();break;case z.space:W();break;case z.left:G();break;case z.up:x("zoomIn");break;case z.right:H();break;case z.down:x("zoomOut")}}),u=N(c=>{x((c.deltaY||c.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:l.zoomRate,enableTransition:!1})});F.run(()=>{E(document,"keydown",o),E(document,"wheel",u)})})(),(s=(e=L.value)==null?void 0:e.focus)==null||s.call(e)}),T({setActiveItem:Y}),(e,s)=>(C(),Z(Pe,{to:"body",disabled:!e.teleported},[i(De,{name:"viewer-fade",appear:""},{default:b(()=>[m("div",{ref_key:"wrapper",ref:L,tabindex:-1,class:f(a(n).e("wrapper")),style:j({zIndex:a(ue)})},[m("div",{class:f(a(n).e("mask")),onClick:s[0]||(s[0]=Oe(o=>e.hideOnClickModal&&R(),["self"]))},null,2),O(" CLOSE "),m("span",{class:f([a(n).e("btn"),a(n).e("close")]),onClick:R},[i(a(w),null,{default:b(()=>[i(a(Ne))]),_:1})],2),O(" ARROW "),a(ne)?O("v-if",!0):(C(),B(q,{key:0},[m("span",{class:f(a(oe)),onClick:G},[i(a(w),null,{default:b(()=>[i(a(Te))]),_:1})],2),m("span",{class:f(a(ie)),onClick:H},[i(a(w),null,{default:b(()=>[i(a(Ae))]),_:1})],2)],64)),O(" ACTIONS "),m("div",{class:f([a(n).e("btn"),a(n).e("actions")])},[m("div",{class:f(a(n).e("actions__inner"))},[i(a(w),{onClick:s[1]||(s[1]=o=>x("zoomOut"))},{default:b(()=>[i(a(Ee))]),_:1}),i(a(w),{onClick:s[2]||(s[2]=o=>x("zoomIn"))},{default:b(()=>[i(a(Le))]),_:1}),m("i",{class:f(a(n).e("actions__divider"))},null,2),i(a(w),{onClick:W},{default:b(()=>[(C(),Z(Re(a(A).icon)))]),_:1}),m("i",{class:f(a(n).e("actions__divider"))},null,2),i(a(w),{onClick:s[3]||(s[3]=o=>x("anticlockwise"))},{default:b(()=>[i(a(Ye))]),_:1}),i(a(w),{onClick:s[4]||(s[4]=o=>x("clockwise"))},{default:b(()=>[i(a(Xe))]),_:1})],2)],2),O(" CANVAS "),m("div",{class:f(a(n).e("canvas"))},[(C(!0),B(q,null,Be(e.urlList,(o,u)=>Se((C(),B("img",{ref_for:!0,ref:c=>S.value[u]=c,key:o,src:o,style:j(a(ce)),class:f(a(n).e("img")),onLoad:re,onError:de,onMousedown:fe},null,46,ee)),[[Fe,u===k.value]])),128))],2),$e(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]))});export{J as E,Ve as __tla,N as t};
