import{d as Q,p as i,cq as Z,r as u,co as D,cp as F,aQ as G,o as U,c as J,i as p,w as $,a as c,x as K,V as N,g as s,aH as q,q as O,a3 as R,c8 as m,bm as W,aP as X,_ as Y,$ as aa,a0 as ea,__tla as la}from"./index-438cb142.js";import{E as ia,__tla as ta}from"./el-image-viewer-cc449738.js";import{u as sa,__tla as ra}from"./useMessage-a65b1a59.js";let S,da=Promise.all([(()=>{try{return la}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{let f,_,v,y,h,b,k,w,x;f=a=>(aa("data-v-3658f35e"),a=a(),ea(),a),_={class:"upload-box"},v={class:"upload-empty"},y=["src"],h=["onClick"],b=f(()=>s("span",null,"\u67E5\u770B",-1)),k=["onClick"],w=f(()=>s("span",null,"\u5220\u9664",-1)),x={class:"el-upload__tip"},S=Q({name:"UploadImgs",__name:"UploadImgs",props:{modelValue:{type:Array,required:!0},updateUrl:i.string.def("http://47.103.169.246:48080/admin-api/infra/file/upload"),drag:i.bool.def(!0),disabled:i.bool.def(!1),limit:i.number.def(5),fileSize:i.number.def(5),fileType:i.array.def(["image/jpeg","image/png","image/gif"]),height:i.string.def("150px"),width:i.string.def("150px"),borderradius:i.string.def("8px")},emits:["update:modelValue"],setup(a,{emit:T}){Z(e=>({c41eccd2:a.borderradius,"2c92160d":a.width,"4be1b1c0":a.height}));const j=sa(),n=a,A=u({Authorization:"Bearer "+D(),"tenant-id":F()}),t=u([]);G(()=>n.modelValue,e=>{e&&(t.value=e)},{deep:!0,immediate:!0});const I=e=>{const l=e.size/1024/1024<n.fileSize,r=n.fileType;return r.includes(e.type)||m({title:"\u6E29\u99A8\u63D0\u793A",message:"\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01",type:"warning"}),l||m({title:"\u6E29\u99A8\u63D0\u793A",message:`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${n.fileSize}M\uFF01`,type:"warning"}),r.includes(e.type)&&l},V=T,M=(e,l)=>{e&&(l.url=e.data,V("update:modelValue",t.value),j.success("\u4E0A\u4F20\u6210\u529F"))},P=()=>{m({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01",type:"error"})},B=()=>{m({title:"\u6E29\u99A8\u63D0\u793A",message:`\u5F53\u524D\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 ${n.limit} \u5F20\u56FE\u7247\uFF0C\u8BF7\u79FB\u9664\u540E\u4E0A\u4F20\uFF01`,type:"warning"})},z=u(""),g=u(!1);return(e,l)=>{const r=Y,E=W,H=ia;return U(),J("div",_,[p(E,{"file-list":c(t),"onUpdate:fileList":l[1]||(l[1]=d=>K(t)?t.value=d:null),accept:a.fileType.join(","),action:a.updateUrl,"before-upload":I,class:N(["upload",a.drag?"no-border":""]),drag:a.drag,headers:c(A),limit:a.limit,multiple:!0,"on-error":P,"on-exceed":B,"on-success":M,"list-type":"picture-card"},{file:$(({file:d})=>[s("img",{src:d.url,class:"upload-image"},null,8,y),s("div",{class:"upload-handle",onClick:l[0]||(l[0]=X(()=>{},["stop"]))},[s("div",{class:"handle-icon",onClick:L=>{return o=d,z.value=o.url,void(g.value=!0);var o}},[p(r,{icon:"ep:zoom-in"}),b],8,h),s("div",{class:"handle-icon",onClick:L=>{return o=d,t.value=t.value.filter(C=>C.url!==o.url||C.name!==o.name),void V("update:modelValue",t.value);var o}},[p(r,{icon:"ep:delete"}),w],8,k)])]),default:$(()=>[s("div",v,[q(e.$slots,"empty",{},()=>[p(r,{icon:"ep:plus"})],!0)])]),_:3},8,["file-list","accept","action","class","drag","headers","limit"]),s("div",x,[q(e.$slots,"tip",{},void 0,!0)]),c(g)?(U(),O(H,{key:0,"url-list":[c(z)],onClose:l[2]||(l[2]=d=>g.value=!1)},null,8,["url-list"])):R("",!0)])}}})});export{S as _,da as __tla};
