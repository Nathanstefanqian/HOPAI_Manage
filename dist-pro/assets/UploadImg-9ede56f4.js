import{d as P,p as t,cq as W,r as _,cr as A,co as F,cp as H,o as s,c as i,i as n,w as Q,a as d,V as G,g as r,aH as z,q as J,a3 as c,bm as K,F as L,t as h,aP as N,l as O,_ as R,__tla as X}from"./index-ad2885e5.js";import{E as Y,__tla as Z}from"./el-image-viewer-3779b731.js";import{u as aa,__tla as ea}from"./useMessage-db992d55.js";import{_ as ta}from"./_plugin-vue_export-helper-1b428a4d.js";let B,la=Promise.all([(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ea}catch{}})()]).then(async()=>{let g,y,b,v,k,w,x;g={class:"upload-box"},y=["src"],b={key:0},v={key:0},k={key:0},w={key:1,class:"upload-empty"},x={class:"el-upload__tip"},B=ta(P({name:"UploadImg",__name:"UploadImg",props:{modelValue:t.string.def(""),updateUrl:t.string.def("http://47.103.169.246:48080/admin-api/infra/file/upload"),drag:t.bool.def(!0),disabled:t.bool.def(!1),fileSize:t.number.def(5),fileType:t.array.def(["image/jpeg","image/png","image/gif"]),height:t.string.def("150px"),width:t.string.def("150px"),borderradius:t.string.def("8px"),showDelete:t.bool.def(!0),showBtnText:t.bool.def(!0)},emits:["update:modelValue"],setup(a,{emit:C}){W(e=>({"11460c1a":a.width,"4b196acc":a.height,"0a02b21e":a.borderradius}));const u=a,{t:m}=O(),p=aa(),T=_("id-"+A()),f=_(!1),V=C,$=()=>{V("update:modelValue","")},E=_({Authorization:"Bearer "+F(),"tenant-id":H()}),S=()=>{const e=document.querySelector(`#${T.value} .el-upload__input`);e&&e.dispatchEvent(new MouseEvent("click"))},U=e=>{const l=e.size/1024/1024<u.fileSize,o=u.fileType;return o.includes(e.type)||p.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),l||p.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${u.fileSize}M\uFF01`),o.includes(e.type)&&l},q=e=>{p.success("\u4E0A\u4F20\u6210\u529F"),V("update:modelValue",e.data)},I=()=>{p.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(e,l)=>{const o=R,j=K,D=Y;return s(),i("div",g,[n(j,{action:a.updateUrl,id:d(T),class:G(["upload",a.drag?"no-border":""]),multiple:!1,"show-file-list":!1,headers:d(E),"before-upload":U,"on-success":q,"on-error":I,drag:a.drag,accept:a.fileType.join(",")},{default:Q(()=>[a.modelValue?(s(),i(L,{key:0},[r("img",{src:a.modelValue,class:"upload-image"},null,8,y),r("div",{class:"upload-handle",onClick:l[1]||(l[1]=N(()=>{},["stop"]))},[r("div",{class:"handle-icon",onClick:S},[n(o,{icon:"ep:edit"}),a.showBtnText?(s(),i("span",b,h(d(m)("action.edit")),1)):c("",!0)]),r("div",{class:"handle-icon",onClick:l[0]||(l[0]=M=>f.value=!0)},[n(o,{icon:"ep:zoom-in"}),a.showBtnText?(s(),i("span",v,h(d(m)("action.detail")),1)):c("",!0)]),a.showDelete?(s(),i("div",{key:0,class:"handle-icon",onClick:$},[n(o,{icon:"ep:delete"}),a.showBtnText?(s(),i("span",k,h(d(m)("action.del")),1)):c("",!0)])):c("",!0)])],64)):(s(),i("div",w,[z(e.$slots,"empty",{},()=>[n(o,{icon:"ep:plus"})],!0)]))]),_:3},8,["action","id","class","headers","drag","accept"]),r("div",x,[z(e.$slots,"tip",{},void 0,!0)]),d(f)?(s(),J(D,{key:0,onClose:l[2]||(l[2]=M=>f.value=!1),"url-list":[a.modelValue]},null,8,["url-list"])):c("",!0)])}}}),[["__scopeId","data-v-c372399e"]])});export{B as _,la as __tla};
