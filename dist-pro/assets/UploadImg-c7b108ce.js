import{d as W,p as t,cq as A,r as _,cr as F,co as Q,cp as G,o as s,c as i,i as n,w as P,a as d,V as Z,g as r,aI as z,q as H,a3 as c,bn as J,F as K,t as h,aQ as L,l as N,_ as O,__tla as R}from"./index-7b6f7d71.js";import{E as X,__tla as Y}from"./el-image-viewer-aab9bdab.js";import{u as aa,__tla as ea}from"./useMessage-74a9519a.js";import{_ as ta}from"./_plugin-vue_export-helper-1b428a4d.js";let B,la=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return ea}catch{}})()]).then(async()=>{let g,y,b,v,k,w,x;g={class:"upload-box"},y=["src"],b={key:0},v={key:0},k={key:0},w={key:1,class:"upload-empty"},x={class:"el-upload__tip"},B=ta(W({name:"UploadImg",__name:"UploadImg",props:{modelValue:t.string.def(""),updateUrl:t.string.def("http://47.103.169.246:48080/admin-api/infra/file/upload"),drag:t.bool.def(!0),disabled:t.bool.def(!1),fileSize:t.number.def(5),fileType:t.array.def(["image/jpeg","image/png","image/gif"]),height:t.string.def("150px"),width:t.string.def("150px"),borderradius:t.string.def("8px"),showDelete:t.bool.def(!0),showBtnText:t.bool.def(!0)},emits:["update:modelValue"],setup(a,{emit:C}){A(e=>({"11460c1a":a.width,"4b196acc":a.height,"0a02b21e":a.borderradius}));const u=a,{t:m}=N(),p=aa(),T=_("id-"+F()),f=_(!1),V=C,U=()=>{V("update:modelValue","")},E=_({Authorization:"Bearer "+Q(),"tenant-id":G()}),I=()=>{const e=document.querySelector(`#${T.value} .el-upload__input`);e&&e.dispatchEvent(new MouseEvent("click"))},S=e=>{const l=e.size/1024/1024<u.fileSize,o=u.fileType;return o.includes(e.type)||p.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),l||p.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${u.fileSize}M\uFF01`),o.includes(e.type)&&l},$=e=>{p.success("\u4E0A\u4F20\u6210\u529F"),V("update:modelValue",e.data)},q=()=>{p.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(e,l)=>{const o=O,j=J,D=X;return s(),i("div",g,[n(j,{action:a.updateUrl,id:d(T),class:Z(["upload",a.drag?"no-border":""]),multiple:!1,"show-file-list":!1,headers:d(E),"before-upload":S,"on-success":$,"on-error":q,drag:a.drag,accept:a.fileType.join(",")},{default:P(()=>[a.modelValue?(s(),i(K,{key:0},[r("img",{src:a.modelValue,class:"upload-image"},null,8,y),r("div",{class:"upload-handle",onClick:l[1]||(l[1]=L(()=>{},["stop"]))},[r("div",{class:"handle-icon",onClick:I},[n(o,{icon:"ep:edit"}),a.showBtnText?(s(),i("span",b,h(d(m)("action.edit")),1)):c("",!0)]),r("div",{class:"handle-icon",onClick:l[0]||(l[0]=M=>f.value=!0)},[n(o,{icon:"ep:zoom-in"}),a.showBtnText?(s(),i("span",v,h(d(m)("action.detail")),1)):c("",!0)]),a.showDelete?(s(),i("div",{key:0,class:"handle-icon",onClick:U},[n(o,{icon:"ep:delete"}),a.showBtnText?(s(),i("span",k,h(d(m)("action.del")),1)):c("",!0)])):c("",!0)])],64)):(s(),i("div",w,[z(e.$slots,"empty",{},()=>[n(o,{icon:"ep:plus"})],!0)]))]),_:3},8,["action","id","class","headers","drag","accept"]),r("div",x,[z(e.$slots,"tip",{},void 0,!0)]),d(f)?(s(),H(D,{key:0,onClose:l[2]||(l[2]=M=>f.value=!1),"url-list":[a.modelValue]},null,8,["url-list"])):c("",!0)])}}}),[["__scopeId","data-v-c372399e"]])});export{B as _,la as __tla};
