import{d as re,u as oe,r as _,f as ue,aR as de,A as pe,O as se,o as u,c as i,i as l,w as t,a,F as n,k as y,q as d,a3 as w,P as _e,B as C,a2 as ie,j as b,g as ne,M as ce,C as me,D as ye,G as ve,T as fe,_ as be,H as he,I as ke,K as Ve,L as Ue,__tla as we}from"./index-dc75a212.js";import{_ as Ce,__tla as Te}from"./index.vue_vue_type_script_setup_true_lang-8ea2ac7e.js";import{E as ge,a as Ee,b as xe,__tla as Pe}from"./el-dropdown-item-50affd97.js";import{_ as Ie,__tla as De}from"./ContentWrap.vue_vue_type_script_setup_true_lang-82e41862.js";import{_ as Re,__tla as Se}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-cb31259a.js";import{_ as qe,__tla as Ne}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-f98debac.js";import{e as Ae,__tla as Ye}from"./index-c2b2355b.js";import{a as Oe,__tla as Le}from"./index-67875ffa.js";import{a as T,D as k,e as Fe,__tla as Ke}from"./dict-87f9bd7d.js";import{g as Me,__tla as ze}from"./index-b4a57fef.js";import{D as g,T as He}from"./constants-3cc050b6.js";import Ge,{__tla as je}from"./OrderTableColumn-7959a9bb.js";import{__tla as Xe}from"./index-3d67f42b.js";import{__tla as Be}from"./el-card-e59bf48d.js";import{__tla as Je}from"./Dialog.vue_vue_type_style_index_0_lang-3aad5d32.js";import{__tla as Qe}from"./useMessage-8f9df09b.js";import{__tla as We}from"./el-image-715e53d1.js";import{__tla as Ze}from"./el-image-viewer-6d412332.js";import{__tla as $e}from"./DictTag.vue_vue_type_script_lang-c23c572c.js";import{__tla as ea}from"./formatTime-e1c06ca2.js";import{__tla as aa}from"./index-7cf5767d.js";import{__tla as la}from"./ImageViewer.vue_vue_type_script_setup_true_lang-c44d6e15.js";import"./_plugin-vue_export-helper-1b428a4d.js";let j,ta=Promise.all([(()=>{try{return we}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Se}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return je}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return la}catch{}})()]).then(async()=>{let D;D={class:"flex items-center justify-center"},j=re({name:"TradeOrder",__name:"index",setup(ra){const{currentRoute:X,push:B}=oe(),E=_(!0),R=_(2),x=_([]),S=_(),r=_({pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),h=ue({queryParam:""}),q=_([{value:"no",label:"\u8BA2\u5355\u53F7"},{value:"userId",label:"\u7528\u6237UID"},{value:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{value:"userMobile",label:"\u7528\u6237\u7535\u8BDD"}]),J=c=>{var o;(o=q.value.filter(p=>p.value!==c))==null||o.forEach(p=>{r.value.hasOwnProperty(p.value)&&delete r.value[p.value]})},v=async()=>{E.value=!0;try{const c=await Ae(a(r));x.value=c.list,R.value=c.total}finally{E.value=!1}},P=async()=>{r.value.pageNo=1,await v()},Q=()=>{var c;(c=S.value)==null||c.resetFields(),r.value={pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0},P()},N=_(),A=_();de(()=>X.value,()=>{v()});const I=_([]),Y=_([]);return pe(async()=>{await v(),I.value=await Oe(),Y.value=await Me()}),(c,o)=>{const p=ce,m=me,s=ye,W=ve,O=fe,f=be,V=he,Z=ke,L=Ie,F=ge,$=Ee,ee=xe,ae=Ve,le=Ce,K=se("hasPermi"),te=Ue;return u(),i(n,null,[l(L,null,{default:t(()=>[l(Z,{ref_key:"queryFormRef",ref:S,inline:!0,model:a(r),class:"-mb-15px","label-width":"68px"},{default:t(()=>[l(s,{label:"\u8BA2\u5355\u72B6\u6001",prop:"status"},{default:t(()=>[l(m,{modelValue:a(r).status,"onUpdate:modelValue":o[0]||(o[0]=e=>a(r).status=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_ORDER_STATUS),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u652F\u4ED8\u65B9\u5F0F",prop:"payChannelCode"},{default:t(()=>[l(m,{modelValue:a(r).payChannelCode,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(Fe)(a(k).PAY_CHANNEL_CODE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[l(W,{modelValue:a(r).createTime,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).createTime=e),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-280px","end-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4","start-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(s,{label:"\u8BA2\u5355\u6765\u6E90",prop:"terminal"},{default:t(()=>[l(m,{modelValue:a(r).terminal,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).terminal=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TERMINAL),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u8BA2\u5355\u7C7B\u578B",prop:"type"},{default:t(()=>[l(m,{modelValue:a(r).type,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).type=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_ORDER_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u914D\u9001\u65B9\u5F0F",prop:"deliveryType"},{default:t(()=>[l(m,{modelValue:a(r).deliveryType,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_DELIVERY_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).deliveryType===a(g).EXPRESS.type?(u(),d(s,{key:0,label:"\u5FEB\u9012\u516C\u53F8",prop:"logisticsId"},{default:t(()=>[l(m,{modelValue:a(r).logisticsId,"onUpdate:modelValue":o[6]||(o[6]=e=>a(r).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(Y),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:1,label:"\u81EA\u63D0\u95E8\u5E97",prop:"pickUpStoreId"},{default:t(()=>[l(m,{modelValue:a(r).pickUpStoreId,"onUpdate:modelValue":o[7]||(o[7]=e=>a(r).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(I),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:2,label:"\u6838\u9500\u7801",prop:"pickUpVerifyCode"},{default:t(()=>[l(O,{modelValue:a(r).pickUpVerifyCode,"onUpdate:modelValue":o[8]||(o[8]=e=>a(r).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u81EA\u63D0\u6838\u9500\u7801",onKeyup:_e(P,["enter"])},null,8,["modelValue","onKeyup"])]),_:1})):w("",!0),l(s,{label:"\u805A\u5408\u641C\u7D22"},{default:t(()=>[C(l(O,{modelValue:a(r)[a(h).queryParam],"onUpdate:modelValue":o[10]||(o[10]=e=>a(r)[a(h).queryParam]=e),type:a(h).queryParam==="userId"?"number":"text",class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165"},{prepend:t(()=>[l(m,{modelValue:a(h).queryParam,"onUpdate:modelValue":o[9]||(o[9]=e=>a(h).queryParam=e),class:"!w-110px",clearable:"",placeholder:"\u5168\u90E8",onChange:J},{default:t(()=>[(u(!0),i(n,null,y(a(q),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[ie,!0]])]),_:1}),l(s,null,{default:t(()=>[l(V,{onClick:P},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:search"}),b(" \u641C\u7D22 ")]),_:1}),l(V,{onClick:Q},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:refresh"}),b(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(L,null,{default:t(()=>[C((u(),d(ae,{data:a(x),"row-key":"id"},{default:t(()=>[l(a(Ge),{list:a(x),"pick-up-store-list":a(I)},{default:t(({row:e})=>[ne("div",D,[C((u(),d(V,{link:"",type:"primary",onClick:M=>{return U=e.id,void B({name:"TradeOrderDetail",params:{id:U}});var U}},{default:t(()=>[l(f,{icon:"ep:notification"}),b(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])),[[K,["trade:order:query"]]]),C((u(),d(ee,{onCommand:M=>((U,z)=>{var H,G;switch(U){case"remark":(H=A.value)==null||H.open(z);break;case"delivery":(G=N.value)==null||G.open(z)}})(M,e)},{dropdown:t(()=>[l($,null,{default:t(()=>[e.deliveryType===a(g).EXPRESS.type&&e.status===a(He).UNDELIVERED.status?(u(),d(F,{key:0,command:"delivery"},{default:t(()=>[l(f,{icon:"ep:takeaway-box"}),b(" \u53D1\u8D27 ")]),_:1})):w("",!0),l(F,{command:"remark"},{default:t(()=>[l(f,{icon:"ep:chat-line-square"}),b(" \u5907\u6CE8 ")]),_:1})]),_:2},1024)]),default:t(()=>[l(V,{link:"",type:"primary"},{default:t(()=>[l(f,{icon:"ep:d-arrow-right"}),b(" \u66F4\u591A ")]),_:1})]),_:2},1032,["onCommand"])),[[K,["trade:order:update"]]])])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[te,a(E)]]),l(le,{limit:a(r).pageSize,"onUpdate:limit":o[11]||(o[11]=e=>a(r).pageSize=e),page:a(r).pageNo,"onUpdate:page":o[12]||(o[12]=e=>a(r).pageNo=e),total:a(R),onPagination:v},null,8,["limit","page","total"])]),_:1}),l(Re,{ref_key:"deliveryFormRef",ref:N,onSuccess:v},null,512),l(qe,{ref_key:"updateRemarkForm",ref:A,onSuccess:v},null,512)],64)}}})});export{ta as __tla,j as default};
