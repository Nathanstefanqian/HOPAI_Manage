import{ao as p,d as T,r as d,f as z,o as b,q as h,w as s,i as r,j as k,a as l,B as A,x as J,l as K,T as M,D as N,bG as O,I as Q,H as W,L as X,__tla as Y}from"./index-12d626d1.js";import{_ as Z,__tla as $}from"./Dialog.vue_vue_type_style_index_0_lang-28b4751a.js";import{_ as ee,__tla as le}from"./UploadImg-33fbae3b.js";import{u as ae,__tla as te}from"./useMessage-86d9ff5e.js";let x,L,q,R,re=Promise.all([(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return te}catch{}})()]).then(async()=>{R=async i=>await p.get({url:"/product/carousel/page",params:i}),L=async i=>await p.delete({url:"/product/carousel/delete?id="+i}),q=async i=>await p.download({url:"/product/carousel/export-excel",params:i}),x=T({__name:"CarouselForm",props:{sortList:{}},emits:["success"],setup(i,{expose:C,emit:S}){const{t:v}=K(),y=ae(),c=d(!1),U=d(""),n=d(!1),f=d(""),a=d({id:void 0,title:void 0,imageUrl:void 0,description:void 0,linkUrl:void 0,sort:1}),V=d(),B=i,g=z({title:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],imageUrl:[{required:!0,message:"\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{validator:(o,e,u)=>{f.value==="update"&&V.value===e&&u(),B.sortList.includes(parseInt(e))?u(new Error("\u8BE5\u6B21\u5E8F\u5DF2\u88AB\u5176\u4ED6\u56FE\u7247\u5360\u7528")):u()},trigger:"blur"}],linkUrl:[{required:!0,message:"\u5916\u94FEURL\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=d();C({open:async(o,e)=>{if(c.value=!0,U.value=v("action."+o),f.value=o,j(),e){n.value=!0;try{a.value=await(async u=>await p.get({url:"/product/carousel/get?id="+u}))(e),V.value=a.value.sort}finally{n.value=!1}}}});const F=S,I=async()=>{if(_&&await _.value.validate()){n.value=!0;try{const o=a.value;f.value==="create"?(await(async e=>await p.post({url:"/product/carousel/create",data:e}))(o),y.success(v("common.createSuccess"))):(await(async e=>await p.put({url:"/product/carousel/update",data:e}))(o),y.success(v("common.updateSuccess"))),c.value=!1,F("success")}finally{n.value=!1}}},j=()=>{var o;a.value={id:void 0,title:void 0,imageUrl:void 0,description:void 0,linkUrl:void 0,sort:1},(o=_.value)==null||o.resetFields()};return(o,e)=>{const u=M,m=N,D=ee,E=O,G=Q,w=W,H=Z,P=X;return b(),h(H,{title:l(U),modelValue:l(c),"onUpdate:modelValue":e[7]||(e[7]=t=>J(c)?c.value=t:null)},{footer:s(()=>[r(w,{onClick:I,type:"primary",disabled:l(n)},{default:s(()=>[k("\u786E \u5B9A")]),_:1},8,["disabled"]),r(w,{onClick:e[6]||(e[6]=t=>c.value=!1)},{default:s(()=>[k("\u53D6 \u6D88")]),_:1})]),default:s(()=>[A((b(),h(G,{ref_key:"formRef",ref:_,model:l(a),rules:l(g),"label-width":"100px"},{default:s(()=>[r(m,{label:"\u6807\u9898",prop:"title"},{default:s(()=>[r(u,{modelValue:l(a).title,"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u56FE\u7247URL",prop:"imageUrl"},{default:s(()=>[r(D,{modelValue:l(a).imageUrl,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).imageUrl=t),height:"80px"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u6D3B\u52A8\u94FE\u63A5",prop:"linkUrl"},{default:s(()=>[r(u,{modelValue:l(a).linkUrl,"onUpdate:modelValue":e[2]||(e[2]=t=>l(a).linkUrl=t),placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u94FE\u63A5URL"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u663E\u793A\u987A\u5E8F",prop:"sort"},{default:s(()=>[r(E,{modelValue:l(a).sort,"onUpdate:modelValue":e[3]||(e[3]=t=>l(a).sort=t),onBlur:e[4]||(e[4]=t=>l(g).checkSort(l(g).sort)),min:1,max:5},null,8,["modelValue"])]),_:1}),r(m,{label:"\u63CF\u8FF0"},{default:s(()=>[r(u,{type:"textarea",rows:2,placeholder:"\u8BF7\u8F93\u5165\u6587\u672C",modelValue:l(a).description,"onUpdate:modelValue":e[5]||(e[5]=t=>l(a).description=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,l(n)]])]),_:1},8,["title","modelValue"])}}})});export{x as _,re as __tla,L as d,q as e,R as g};
