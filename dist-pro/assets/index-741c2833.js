import{d as H,u as z,N as A,r as m,A as G,B as L,a,o as F,q as I,w as l,i as c,x as y,j as C,a3 as O,l as J,ap as h,aq as v,ar as K,as as P,y as M,z as Q,H as W,D as X,I as Z,L as Y,__tla as $}from"./index-9a3dc6a8.js";import{_ as tt,__tla as at}from"./ContentWrap.vue_vue_type_script_setup_true_lang-29b6dc10.js";import{u as rt,__tla as et}from"./tagsView-e4f7cddc.js";import{g as _t,c as ct,u as ot,__tla as lt}from"./spu-a03f2229.js";import{_ as it,__tla as st}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-575642c5.js";import{_ as mt,__tla as nt}from"./DescriptionForm.vue_vue_type_script_setup_true_lang-3dde6b80.js";import{_ as ut,__tla as pt}from"./OtherSettingsForm.vue_vue_type_script_setup_true_lang-d95b1f73.js";import{_ as ft,__tla as dt}from"./ServiceInfoForm.vue_vue_type_script_setup_true_lang-47697f43.js";import{u as yt,__tla as ht}from"./useMessage-78b6afd0.js";import{__tla as vt}from"./el-card-a6a1b26c.js";import{__tla as Pt}from"./Descriptions-3bac8e72.js";import{__tla as kt}from"./Descriptions.vue_vue_type_style_index_0_scoped_59d56eec_lang-45925201.js";import{__tla as gt}from"./el-descriptions-item-4912b042.js";import{__tla as Bt}from"./DictTag.vue_vue_type_script_lang-8b411a6b.js";import"./color-a8b4eb58.js";import{__tla as Nt}from"./dict-8e2bc13b.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as wt}from"./el-image-5e367cc1.js";import{__tla as bt}from"./el-image-viewer-9fcd8ab9.js";import{__tla as Dt}from"./UploadImgs-272fb42d.js";import{__tla as St}from"./UploadImgs.vue_vue_type_style_index_0_scoped_fe640eb9_lang-784ecf7e.js";import{__tla as Ut}from"./index-669fa91c.js";import"./_commonjs-dynamic-modules-3e972b61.js";import{__tla as Ft}from"./UploadImg-5d1e6385.js";import"./tree-ebab458e.js";import{__tla as It}from"./index-fb652af7.js";import{__tla as Ct}from"./ImageViewer.vue_vue_type_script_setup_true_lang-09cdf77e.js";import{__tla as Rt}from"./index-196fee5c.js";import{__tla as Vt}from"./SkuList.vue_vue_type_script_setup_true_lang-2e72d6c8.js";import{__tla as xt}from"./UploadFile.vue_vue_type_style_index_0_scoped_113ae07d_lang-0370ffc1.js";import{__tla as Et}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-7e35e435.js";import{__tla as Tt}from"./el-text-76be481f.js";import{__tla as jt}from"./property-b59ab5d3.js";import{__tla as qt}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-8a8a0d06.js";import{__tla as Ht}from"./Dialog.vue_vue_type_style_index_0_lang-63789c9e.js";import{__tla as zt}from"./spu.data-140cc4c6.js";import{__tla as At}from"./category-aa4fc6a0.js";import{__tla as Gt}from"./brand-2ad89b70.js";import{__tla as Lt}from"./useCrudSchemas-62c7951b.js";import{__tla as Ot}from"./formRules-d1e69313.js";import{__tla as Jt}from"./style.css_vue_type_style_index_0_src_true_lang-1837822a.js";import{__tla as Kt}from"./ActivityOrdersSort.vue_vue_type_script_setup_true_lang-abeb6f1a.js";let R,Mt=Promise.all([(()=>{try{return $}catch{}})(),(()=>{try{return at}catch{}})(),(()=>{try{return et}catch{}})(),(()=>{try{return lt}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return dt}catch{}})(),(()=>{try{return ht}catch{}})(),(()=>{try{return vt}catch{}})(),(()=>{try{return Pt}catch{}})(),(()=>{try{return kt}catch{}})(),(()=>{try{return gt}catch{}})(),(()=>{try{return Bt}catch{}})(),(()=>{try{return Nt}catch{}})(),(()=>{try{return wt}catch{}})(),(()=>{try{return bt}catch{}})(),(()=>{try{return Dt}catch{}})(),(()=>{try{return St}catch{}})(),(()=>{try{return Ut}catch{}})(),(()=>{try{return Ft}catch{}})(),(()=>{try{return It}catch{}})(),(()=>{try{return Ct}catch{}})(),(()=>{try{return Rt}catch{}})(),(()=>{try{return Vt}catch{}})(),(()=>{try{return xt}catch{}})(),(()=>{try{return Et}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return jt}catch{}})(),(()=>{try{return qt}catch{}})(),(()=>{try{return Ht}catch{}})(),(()=>{try{return zt}catch{}})(),(()=>{try{return At}catch{}})(),(()=>{try{return Gt}catch{}})(),(()=>{try{return Lt}catch{}})(),(()=>{try{return Ot}catch{}})(),(()=>{try{return Jt}catch{}})(),(()=>{try{return Kt}catch{}})()]).then(async()=>{R=H({name:"ProductSpuForm",__name:"index",setup(Qt){const{t:g}=J(),B=yt(),{push:V,currentRoute:x}=z(),{params:N,name:E}=A(),{delView:T}=rt(),u=m(!1),_=m("basicInfo"),n=m(!1),w=m(),b=m(),D=m(),S=m(),p=m({name:"",categoryId:void 0,keyword:"",unit:void 0,picUrl:"",sliderPicUrls:[],introduction:"",deliveryTemplateId:void 0,brandId:void 0,specType:!1,subCommissionType:!1,skus:[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}],description:"",service:"",sort:0,giveIntegral:0,virtualSalesCount:0,recommendHot:!1,recommendBenefit:!1,recommendBest:!1,recommendNew:!1,recommendGood:!1,activityOrders:[]}),j=async()=>{var f,e,o,t;u.value=!0;try{await((f=a(w))==null?void 0:f.validate()),await((e=a(b))==null?void 0:e.validate()),await((o=a(D))==null?void 0:o.validate()),await((t=a(S))==null?void 0:t.validate());const s=K(a(p.value));s.skus.forEach(r=>{r.name=s.name,r.price=P(r.price),r.marketPrice=P(r.marketPrice),r.costPrice=P(r.costPrice),r.firstBrokeragePrice=P(r.firstBrokeragePrice),r.secondBrokeragePrice=P(r.secondBrokeragePrice)});const d=[];s.sliderPicUrls.forEach(r=>{typeof r=="object"?d.push(r.url):d.push(r)}),s.sliderPicUrls=d;const k=s;N.id?(await ot(k),B.success(g("common.updateSuccess"))):(await ct(k),B.success(g("common.createSuccess"))),U()}finally{u.value=!1}},U=()=>{T(a(x)),V({name:"ProductSpu"})};return G(async()=>{await(async()=>{var e;E==="ProductSpuDetail"&&(n.value=!0);const f=N.id;if(f){u.value=!0;try{const o=await _t(f);(e=o.skus)==null||e.forEach(t=>{n.value?(t.price=h(t.price),t.marketPrice=h(t.marketPrice),t.costPrice=h(t.costPrice),t.firstBrokeragePrice=h(t.firstBrokeragePrice),t.secondBrokeragePrice=h(t.secondBrokeragePrice)):(t.price=v(t.price),t.marketPrice=v(t.marketPrice),t.costPrice=v(t.costPrice),t.firstBrokeragePrice=v(t.firstBrokeragePrice),t.secondBrokeragePrice=v(t.secondBrokeragePrice))}),p.value=o}finally{u.value=!1}}})()}),(f,e)=>{const o=M,t=Q,s=W,d=X,k=Z,r=tt,q=Y;return L((F(),I(r,null,{default:l(()=>[c(t,{modelValue:a(_),"onUpdate:modelValue":e[4]||(e[4]=i=>y(_)?_.value=i:null)},{default:l(()=>[c(o,{label:"\u5546\u54C1\u4FE1\u606F",name:"basicInfo"},{default:l(()=>[c(it,{ref_key:"basicInfoRef",ref:w,activeName:a(_),"onUpdate:activeName":e[0]||(e[0]=i=>y(_)?_.value=i:null),"is-detail":a(n),propFormData:a(p)},null,8,["activeName","is-detail","propFormData"])]),_:1}),c(o,{label:"\u5546\u54C1\u8BE6\u60C5",name:"description"},{default:l(()=>[c(mt,{ref_key:"descriptionRef",ref:b,activeName:a(_),"onUpdate:activeName":e[1]||(e[1]=i=>y(_)?_.value=i:null),"is-detail":a(n),propFormData:a(p)},null,8,["activeName","is-detail","propFormData"])]),_:1}),c(o,{label:"\u5176\u4ED6\u8BBE\u7F6E",name:"otherSettings"},{default:l(()=>[c(ut,{ref_key:"otherSettingsRef",ref:D,activeName:a(_),"onUpdate:activeName":e[2]||(e[2]=i=>y(_)?_.value=i:null),"is-detail":a(n),propFormData:a(p)},null,8,["activeName","is-detail","propFormData"])]),_:1}),c(o,{label:"\u670D\u52A1\u8BF4\u660E",name:"ServiceInfo"},{default:l(()=>[c(ft,{ref_key:"ServiceInfoRef",ref:S,activeName:a(_),"onUpdate:activeName":e[3]||(e[3]=i=>y(_)?_.value=i:null),"is-detail":a(n),propFormData:a(p)},null,8,["activeName","is-detail","propFormData"])]),_:1})]),_:1},8,["modelValue"]),c(k,null,{default:l(()=>[c(d,{style:{float:"right"}},{default:l(()=>[a(n)?O("",!0):(F(),I(s,{key:0,loading:a(u),type:"primary",onClick:j},{default:l(()=>[C(" \u4FDD\u5B58 ")]),_:1},8,["loading"])),c(s,{onClick:U},{default:l(()=>[C("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1})]),_:1})),[[q,a(u)]])}}})});export{Mt as __tla,R as default};
